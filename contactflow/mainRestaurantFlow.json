{"modules":[{"id":"bfad812a-c403-42c1-8aac-32371462f6b7","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"9862ad02-ac41-4c4f-b013-080e0ddfcfb1"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":142,"y":25}}},{"id":"9862ad02-ac41-4c4f-b013-080e0ddfcfb1","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"be414537-b6f3-4ec4-8f9e-ffafb463c3d7"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"},{"name":"AnalyticsBehaviorOption","value":"Enable"},{"name":"AnalyticsLanguageLocaleCode","value":"en-US","namespace":null},{"name":"AnalyticsCustomVocabulary","value":"None"},{"name":"AnalyticsRedactionOption","value":"Disable"},{"name":"AnalyticsRedactionPolicy","value":"None","namespace":null},{"name":"AnalyticsMode","value":"PostCall"}],"metadata":{"position":{"x":373,"y":26}}},{"id":"be414537-b6f3-4ec4-8f9e-ffafb463c3d7","type":"StartMediaStreaming","branches":[{"condition":"Success","transition":"d7c5ddfc-e060-49f7-b64a-7258d6ba915e"},{"condition":"Error","transition":"d7c5ddfc-e060-49f7-b64a-7258d6ba915e"}],"parameters":[{"name":"Track","value":"FromCustomer"},{"name":"Track","value":"ToCustomer"},{"name":"MediaStreamTypes","value":"Audio"}],"metadata":{"position":{"x":591,"y":16},"fromCustomer":true,"toCustomer":true}},{"id":"e014c178-7547-486b-8c77-b43b2a79e587","type":"PlayPrompt","branches":[{"condition":"Success","transition":"7d9c8137-c22d-416f-a7a0-c2113257977a"}],"parameters":[{"name":"Text","value":"Hope you enjoy your order! Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1120,"y":235},"useDynamic":false}},{"id":"5dc4d745-d6db-4094-8e70-e12cf71906c7","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1380,"y":456}}},{"id":"a5a5e633-5901-49ef-b62a-c93223b2e797","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"27932362-8fe9-4738-87bf-1de215cfb022"},{"condition":"Error","transition":"e0e65853-13bb-43f1-8737-4b21d62a2994"}],"parameters":[],"metadata":{"position":{"x":822,"y":561},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"27932362-8fe9-4738-87bf-1de215cfb022","type":"PlayPrompt","branches":[{"condition":"Success","transition":"7d9c8137-c22d-416f-a7a0-c2113257977a"}],"parameters":[{"name":"Text","value":"Sorry the queue is full, call back again soon.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1132,"y":551},"useDynamic":false}},{"id":"e98932ce-ce5d-4867-9a89-464bbb9e7641","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e014c178-7547-486b-8c77-b43b2a79e587"}],"parameters":[{"name":"Text","value":"your order status is .....","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":881,"y":409},"useDynamic":false}},{"id":"e0e65853-13bb-43f1-8737-4b21d62a2994","type":"PlayPrompt","branches":[{"condition":"Success","transition":"7d9c8137-c22d-416f-a7a0-c2113257977a"}],"parameters":[{"name":"Text","value":"Sorry we're unable to complete your request. Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1132,"y":390},"useDynamic":false}},{"id":"d7c5ddfc-e060-49f7-b64a-7258d6ba915e","type":"SetAttributes","branches":[{"condition":"Success","transition":"09a1f44e-42cd-480b-91ee-45d9f32607bf"},{"condition":"Error","transition":"09a1f44e-42cd-480b-91ee-45d9f32607bf"}],"parameters":[{"name":"Attribute","value":"$.Attributes.journey | mainRestaurantFlow","key":"journey","namespace":null}],"metadata":{"position":{"x":820,"y":13}}},{"id":"a91e1d92-cbad-47bc-9c33-dae02fe0b7c3","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e014c178-7547-486b-8c77-b43b2a79e587"}],"parameters":[{"name":"Text","value":"thanks for placing your order.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":874,"y":238},"useDynamic":false}},{"id":"5a17432d-86ee-4638-8182-b681b0764f90","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"CheckOrderStatus","transition":"e98932ce-ce5d-4867-9a89-464bbb9e7641"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"GetFoodOrder","transition":"b9076926-7dc5-4f80-b195-4b246171c1a6"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"CustomerServiceRepIntent","transition":"dfa5e2d6-ac9d-49b0-980f-0ad50958090e"},{"condition":"NoMatch","transition":"be8c107d-b049-401c-ac65-b503c91f238c"},{"condition":"Error","transition":"e0e65853-13bb-43f1-8737-4b21d62a2994"}],"parameters":[{"name":"Text","value":"You can say things like \"I'd like to order a large mushroom pizza\" to order,  or \"where is my food\" to check on order status.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"OrderIntake"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":367,"y":224},"conditionMetadata":[{"id":"c57b5592-a443-4a54-80e1-d3f72076466c","value":"CheckOrderStatus"},{"id":"11e65058-8ec4-4c5e-8357-6b5f275e42fe","value":"GetFoodOrder"},{"id":"949ca0c8-0f81-475f-b644-2d5279d8bc99","value":"CustomerServiceRepIntent"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"b9076926-7dc5-4f80-b195-4b246171c1a6","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"a91e1d92-cbad-47bc-9c33-dae02fe0b7c3"},{"condition":"Error","transition":"a91e1d92-cbad-47bc-9c33-dae02fe0b7c3"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:252608137475:function:createOrders","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"PizzaSize","value":"PizzaSize","namespace":"Lex.Slots"},{"name":"Parameter","key":"PizzaType","value":"PizzaToppings","namespace":"Lex.Slots"},{"name":"Parameter","key":"Customer","value":"CustomerName","namespace":"Lex.Slots"}],"metadata":{"position":{"x":634,"y":236},"dynamicMetadata":{"PizzaSize":true,"PizzaType":true,"Customer":true},"useDynamic":false},"target":"Lambda"},{"id":"7d9c8137-c22d-416f-a7a0-c2113257977a","type":"StopMediaStreaming","branches":[{"condition":"Success","transition":"5dc4d745-d6db-4094-8e70-e12cf71906c7"},{"condition":"Error","transition":"5dc4d745-d6db-4094-8e70-e12cf71906c7"}],"parameters":[{"name":"Track","value":"FromCustomer"},{"name":"Track","value":"ToCustomer"},{"name":"MediaStreamTypes","value":"Audio"}],"metadata":{"position":{"x":1367,"y":238}}},{"id":"569ccb7f-c80e-48d9-b70e-6c7765c9817d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"7d9c8137-c22d-416f-a7a0-c2113257977a"}],"parameters":[{"name":"Text","value":"Your order for a $.Attributes.PrevOrderSize $.Attributes.PrevOrderType pizza is $.Attributes.PrevOrderStatus. Thank you!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":346,"y":763},"useDynamic":false}},{"id":"be8c107d-b049-401c-ac65-b503c91f238c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"5a17432d-86ee-4638-8182-b681b0764f90"}],"parameters":[{"name":"Text","value":"Welcome to Pizza Place. How can we help you?","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":142,"y":244},"useDynamic":false}},{"id":"09a1f44e-42cd-480b-91ee-45d9f32607bf","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"2e72d681-a63c-4c02-894c-28560d2cac26"},{"condition":"Error","transition":"be8c107d-b049-401c-ac65-b503c91f238c"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:252608137475:function:getOrderStatus","namespace":null},{"name":"TimeLimit","value":"5"}],"metadata":{"position":{"x":1047,"y":6},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"2e72d681-a63c-4c02-894c-28560d2cac26","type":"SetAttributes","branches":[{"condition":"Success","transition":"6c987d3a-5338-4e1b-bbcd-6804d7062846"},{"condition":"Error","transition":"be8c107d-b049-401c-ac65-b503c91f238c"}],"parameters":[{"name":"Attribute","value":"$.External.customer","key":"PrevOrderCustomer","namespace":null},{"name":"Attribute","value":"$.External.pizzaSize","key":"PrevOrderSize","namespace":null},{"name":"Attribute","value":"$.External.orderStatus","key":"PrevOrderStatus","namespace":null},{"name":"Attribute","value":"$.External.pizzaType","key":"PrevOrderType","namespace":null},{"name":"Attribute","value":"$.External.orderId","key":"PrevOrderId","namespace":null}],"metadata":{"position":{"x":1285,"y":10}}},{"id":"413b9d44-f65f-4e3f-baef-05666ebc3598","type":"PlayPrompt","branches":[{"condition":"Success","transition":"7d9c8137-c22d-416f-a7a0-c2113257977a"}],"parameters":[{"name":"Text","value":"Your order for a $.Attributes.PrevOrderSize $.Attributes.PrevOrderType pizza is has been cancelled.  No further action is necessary. Thanks for your business!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":685,"y":928},"useDynamic":false}},{"id":"dfa5e2d6-ac9d-49b0-980f-0ad50958090e","type":"SetQueue","branches":[{"condition":"Success","transition":"a5a5e633-5901-49ef-b62a-c93223b2e797"},{"condition":"Error","transition":"e0e65853-13bb-43f1-8737-4b21d62a2994"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:252608137475:instance/425b89fa-c819-4fe9-82cd-1f2774272631/queue/16e7cb9e-04c2-46c0-bdd5-dbc326814e77","namespace":null,"resourceName":"PizzaProblems"}],"metadata":{"position":{"x":603,"y":561},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:252608137475:instance/425b89fa-c819-4fe9-82cd-1f2774272631/queue/16e7cb9e-04c2-46c0-bdd5-dbc326814e77","text":"PizzaProblems"}}},{"id":"6c987d3a-5338-4e1b-bbcd-6804d7062846","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"ConfirmIntent","transition":"569ccb7f-c80e-48d9-b70e-6c7765c9817d"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"RejectIntent","transition":"be8c107d-b049-401c-ac65-b503c91f238c"},{"condition":"NoMatch","transition":"be8c107d-b049-401c-ac65-b503c91f238c"},{"condition":"Error","transition":"be8c107d-b049-401c-ac65-b503c91f238c"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"CancelOrderIntent","transition":"41a34891-41e5-4ee5-9130-5303aa3e1d31"}],"parameters":[{"name":"Text","value":"Hi $.Attributes.PrevOrderCustomer thank you for calling pizza place. Are you calling about your order for a $.Attributes.PrevOrderSize $.Attributes.PrevOrderType pizza? Press 1 for yes, 2 for no, 3 to cancel this order.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"YesNoBot"},{"name":"BotAlias","value":"YesNoConnect"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":123,"y":762},"conditionMetadata":[{"id":"7bd90c98-ab61-4a46-9253-c330dd30785e","value":"ConfirmIntent"},{"id":"83a2a371-de86-4ca0-94d6-1859941d8bc8","value":"RejectIntent"},{"id":"c591d947-1e40-4797-9a74-5b2c00579d49","value":"CancelOrderIntent"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"41a34891-41e5-4ee5-9130-5303aa3e1d31","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"413b9d44-f65f-4e3f-baef-05666ebc3598"},{"condition":"Error","transition":"dfa5e2d6-ac9d-49b0-980f-0ad50958090e"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:252608137475:function:cancelOrder","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"PrevOrderId","value":"PrevOrderId","namespace":"User Defined"}],"metadata":{"position":{"x":361,"y":932},"dynamicMetadata":{"PrevOrderId":true},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"bfad812a-c403-42c1-8aac-32371462f6b7","metadata":{"entryPointPosition":{"x":15,"y":26},"snapToGrid":false,"name":"mainRestaurantFlow","description":null,"type":"contactFlow","status":"published","hash":"2429f67cf98bbb33f8418947ccf2ea9db28e8a5b651e3223ce49102516692bbd"}}